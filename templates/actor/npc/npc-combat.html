<div class="titlebar-container">

    <div class="square little left"></div>
    <svg class="title-line">
        <line x1="0" y1="11" x2="100%" y2="11" class="line-stroke"></line>
    </svg>
    <div class="title-line-header">{{localize "DGNS.Combat"}}</div>
    <svg class="title-line">
        <line x1="0" y1="11" x2="100%" y2="11" class="line-stroke"></line>
    </svg>
    <div class="square little right">
    </div>

</div>

<div class="combat-stats-container">
    <div class="config-input-container movement">

        <div class="dice-value"><input type="number" name="system.general.movement"
                value="{{system.general.movement}}" /><span class="dice">{{localize "UI.D"}}</span></div>
        <div class="label">{{localize "DGNS.Movement"}}</div>
    </div>
    <div class="config-input-container">
        <div class="dice-value">
            <input type="number" name="system.fighting.initiative" value="{{system.fighting.initiative}}" /><span
                class="dice">{{localize "UI.D"}}</span>
        </div>
        <div class="label initiative-roll"><a>{{localize "DGNS.Initiative"}}</a></div>
        <div class="spend-ego">
            <a class="label checkbox">{{localize "DGNS.SpendEgo"}}</a>
            <div class="diamond-position">
                <div class="diamond-row" data-target="system.state.spentEgo.value">
                    {{#each system.state.spentEgo.diamonds as |diamond index|}} {{#if
                    diamond.filled}}
                    <a class="diamond" data-index="{{index}}">
                        <div class="square gold"></div>
                    </a>
                    {{else}}
                    <a class="diamond" data-index="{{index}}">
                        <div class="square"></div>
                    </a>
                    {{/if}} {{/each}}
                </div>
            </div>
        </div>
    </div>


    <div class="config-input-container armor" style="flex-wrap: wrap;">
        <div class="dice-value"><input type="number" name="system.armor.rating" value="{{system.armor.rating}}" /></div>
        <div class="label">{{localize "DGNS.Armor"}}</div>
        <div style="height: 0; flex-basis: 100%;"> </div>
        <div class="armor-name"><input type="text" name="system.armor.name" value="{{system.armor.name}}" />
        </div>
    </div>


</div>

<div class="combat-container">
    <!-- ATTACK SECTION -->

    <div class="section-header-container attack">
        <div class="section-header-titleblock">
            <div class="block-title gold">
                <h3>{{localize "DGNS.Attack"}}</h3>
                <a class="right bold icon item-add" data-item="attack">+</a>
            </div>
            <svg class="tab-start-line" height="20" width="26">
                <line x1="0" y1="7" x2="10" y2="7" class="line-stroke"></line>
                <line x1="10" y1="7" x2="26" y2="23" class="line-stroke"></line>
            </svg>
        </div>

        <div class="section-header-legends section-legend-grid attack">
            <div class="legend-name">
                {{localize "DGNS.Attack"}}
            </div>
            <div class="legend-name">
                {{localize "DGNS.Damage"}}
            </div>
            <div class="legend-name">
                {{localize "DGNS.Distance"}}
            </div>
            <div class="legend-name">

            </div>
        </div>
    </div>

    <div class="inventory-list item-list section-list">
        {{#each inventory.attack.items as |item w|}}
        {{#if item.isMelee }}

        <div class="weapon item entry-container section-entry-grid attack entry-list-item" data-item-id="{{item.id}}">
            <a class="weapon-name dropdown">{{item.name}}</a>
            <div class="attack-dice">
                <a class="roll-attack" data-use="attack">{{item.dice.attack}}{{localize "UI.D"}}</a>
            </div>
            <div class="damage">
                {{item.DamageFormula}}<span class="damage-type">{{item.DamageType}}</span>
            </div>
            <div class="distance">{{item.distance.melee}}</div>

            <div class="item-controls">
                <div class="vertical-bar">
                    <svg height="15px" width="1px">
                        <line x1="0%" y1="0%" x2="0%" y2="14px""></line>
                    </svg>
                </div>
                <a class=" icon item-post"><i class="fas fa-comment"></i></a>
                            <a class="icon item-edit"><i class="fas fa-edit"></i></a>
                            <a class="icon item-delete"><i class="fas fa-times"></i></a>
                </div>

            </div>

            {{else}}

            <div class="weapon item entry-container section-entry-grid attack entry-list-item"
                data-item-id="{{item.id}}">
                <a class="weapon-name dropdown">{{item.name}}</a>
                <div class="attack-dice">
                    <a class="roll-attack"
                        data-use="attack-short">≤{{item.distance.short}}m({{item.dice.effective}}{{localize "UI.D"}})
                    </a><a class="roll-attack" data-use="attack-far">≤{{item.distance.far}}m({{item.dice.far}}{{localize
                        "UI.D"}})
                    </a><a class="roll-attack"
                        data-use="attack-extreme">>{{item.distance.far}}m({{item.dice.extreme}}{{localize "UI.D"}})</a>

                </div>
                <div class="damage">
                    {{item.DamageFormula}}
                </div>
                <div class="distance">{{item.distance.short}} / {{item.distance.far}}</div>

                <div class="item-controls">
                    <div class="vertical-bar">
                        <svg height="15px" width="1px">
                            <line x1="0%" y1="0%" x2="0%" y2="14px"></line>
                        </svg>
                    </div>
                    <a class="icon item-post"><i class="fas fa-comment"></i></a>
                    <a class="icon item-edit"><i class="fas fa-edit"></i></a>
                    <a class="icon item-delete"><i class="fas fa-times"></i></a>
                </div>

            </div>


            {{/if}}
            {{/each}}
        </div>

        <!-- DEFENSE SECTION -->

        <div class="section-header-container defense">
            <div class="section-header-titleblock">
                <div class="block-title gold">
                    <h3>{{localize "DGNS.Defense"}}</h3>
                    <a class="right bold icon item-add" data-item="defense">+</a>
                </div>
                <svg class="tab-start-line" height="20" width="26">
                    <line x1="0" y1="7" x2="10" y2="7" class="line-stroke"></line>
                    <line x1="10" y1="7" x2="26" y2="23" class="line-stroke"></line>
                </svg>
            </div>

            <div class="section-header-legends section-legend-grid defense">
                <div class="legend-name">
                    {{localize "UI.Type"}}
                </div>
                <div class="legend-name">
                    {{localize "DGNS.Defense"}}
                </div>

                <div class="legend-name">

                </div>
            </div>
        </div>

        <div class="inventory-list item-list section-list">
            {{#each inventory.defense.items as |item w|}}
            <div class="weapon item entry-container section-entry-grid defense entry-list-item"
                data-item-id="{{item.id}}">
                <a class="weapon-name dropdown">{{item.name}}</a>
                <div class="type"><a class="roll-defense" data-use="defense">{{localize (lookup (concat
                        "DGNS.Defense" (capitalize item.group)) 'string')}}</a></div>
                <div class="defense-dice">{{lookup this.dice this.group }}</div>



                <div class="item-controls">
                    <div class="vertical-bar">
                        <svg height="15px" width="1px">
                            <line x1="0%" y1="0%" x2="0%" y2="14px"></line>
                        </svg>
                    </div>
                    <a class="icon item-post"><i class="fas fa-comment"></i></a>
                    <a class="icon item-edit"><i class="fas fa-edit"></i></a>
                    <a class="icon item-delete"><i class="fas fa-times"></i></a>
                </div>

            </div>
            {{/each}}
        </div>


        <!-- POTENTIALS SECTION -->
        <!-- HIDE THIS SECTION FOR NOW -> MOVED TO ADVANTAGES 

    <div class="section-header-container potential">
        <div class="section-header-titleblock">
            <div class="block-title white">
                <h3>{{localize "DGNS.Potentials"}}</h3>
                <a class="right bold icon item-add" data-item="potential">+</a>
            </div>
            <svg class="tab-start-line" height="20" width="26">
                <line x1="0" y1="7" x2="10" y2="7" class="line-stroke"></line>
                <line x1="10" y1="7" x2="26" y2="23" class="line-stroke"></line>
            </svg>
        </div>

        <div class="section-header-legends section-legend-grid potential">
            <div class="legend-name">
                <span>{{localize "DGNS.Origin"}}</span>
            </div>
            <div class="legend-name">
                <span>{{localize "DGNS.Level"}}</span>
            </div>
        </div>
    </div>

    <div class="inventory-list item-list section-list">
        {{#each actor.potentialItems as |potential p|}}
        <div class="weapon item entry-container section-entry-grid potential entry-list-item"
            data-item-id="{{potential.id}}">
            <a class="potential-name dropdown">{{potential.name}}</a>
            <div class="origin">
                {{potential.origin}}
            </div>
            <div class="level">
                <div class="diamond-position">
                    <div class="diamond-row" data-target="item" data-item-target="system.level">
                        {{#each potential.potentialDiamonds as |diamond index|}}
                        {{#if diamond.filled}}
                        <a class="diamond" data-index={{index}}>
                            <div class="square gold"></div>
                        </a>
                        {{else}}
                        <a class="diamond" data-index={{index}}>
                            <div class="square"></div>
                        </a>
                        {{/if}}
                        {{/each}}
                    </div>
                </div>
            </div>

            <div class="item-controls">
                <div class="vertical-bar gold">
                    <svg height="15px" width="1px">
                        <line x1="0%" y1="0%" x2="0%" y2="14px" style="stroke:#fff;stroke-width:2"></line>
                    </svg>
                </div>
                <a class="icon item-post"><i class="fas fa-comment"></i></a>
                <a class="icon item-edit"><i class="fas fa-edit"></i></a>
                <a class="icon item-delete"><i class="fas fa-times"></i></a>
            </div>

        </div>
        {{/each}}
    </div>
        
-->

    </div>

    <div class="footer-diamond">
        <div class="square little"></div>
        <div class="square little"></div>
    </div>