
<div class="title">
   {{{drawSubtitle (localize "DGNS.Condition")}}}
</div>

<div class="condition-tab">
   <!-- * CONDITION * -->
   <div class="column-flex">

      <div class="ego bar-group">
         <div class="diamond-row bar" data-target="system.condition.ego.value" data-targetParent="system.condition.ego">
            {{#each data.condition.ego.diamonds as |diamond index|}}
               {{#if diamond.locked}}
               <div class="diamond" data-index={{index}}>
                  <div class="square black"></div>
               </div>
               {{else if diamond.filled}}
               <a class="diamond" data-index={{index}}>
                  <div class="square red"></div>
               </a>
               {{else}}
               <a class="diamond" data-index={{index}}>
                  <div class="square"></div>
               </a>
               {{/if}}
            {{/each}}
         </div>
         <div class="text condition-title">
            {{localize "DGNS.Ego"}} <span class="condition-value">({{currentEgo data.condition.ego}}/{{data.condition.ego.max}})</span>
         </div>
        
      </div>

      <div class="spore bar-group">
         <div class="diamond-row bar" data-target="system.condition.spore.value" data-targetParent="system.condition.spore">
            {{#each data.condition.spore.diamonds as |diamond index|}}
               {{#if diamond.locked}}
               <div class="diamond" data-index={{index}}>
                  <div class="square black"></div>
               </div>
               {{else if diamond.permanent}}
               <a class="diamond perma" data-index={{index}}>
                  <div class="square red perma" data-index={{index}}><div class="square-into black mid-size"></div></div>
               </a>
               {{else if diamond.filled}}
               <a class="diamond perma" data-index={{index}}>
                  <div class="square red"></div>
               </a>
               {{else}}
               <a class="diamond" data-index={{index}}>
                  <div class="square"></div>
               </a>
               {{/if}}
            {{/each}}
         </div>
         <div class="text condition-title">
            {{localize "DGNS.Spore"}} <span class="condition-value">({{data.condition.spore.value}}/{{data.condition.spore.max}})<span class="condition-value-permanent">{{data.condition.spore.permanent}} {{localize "DGNS.Permanent" }}</span></span>
         </div>
      </div>

      <div class="fleshwounds bar-group">
         <div class="diamond-row bar" data-target="system.condition.fleshwounds.value" data-targetParent="system.condition.fleshwounds">
            {{#each data.condition.fleshwounds.diamonds as |diamond index|}}
               {{#if diamond.locked}}
               <div class="diamond" data-index={{index}}>
                  <div class="square black"></div>
               </div>
               {{else if diamond.filled}}
               <a class="diamond" data-index={{index}}>
                  <div class="square red"></div>
               </a>
               {{else}}
               <a class="diamond" data-index={{index}}>
                  <div class="square"></div>
               </a>
               {{/if}}
            {{/each}}
         </div>
         <div class="text condition-title">
            {{localize "DGNS.Fleshwounds"}}<span class="condition-value">({{data.condition.fleshwounds.value}}/{{data.condition.fleshwounds.max}})</span>
         </div>
      </div>

      <div class="trauma bar-group">
         <div class="diamond-row bar" data-target="system.condition.trauma.value" data-targetParent="system.condition.trauma">
            {{#each data.condition.trauma.diamonds as |diamond index|}}
               {{#if diamond.locked}}
               <div class="diamond" data-index={{index}}>
                  <div class="square black"></div>
               </div>
               {{else if diamond.filled}}
               <a class="diamond" data-index={{index}}>
                  <div class="square red"></div>
               </a>
               {{else}}
               <a class="diamond" data-index={{index}}>
                  <div class="square"></div>
               </a>
               {{/if}}
            {{/each}}
         </div>
         <div class="text condition-title">
            {{localize "DGNS.Trauma"}}<span class="condition-value">({{data.condition.trauma.value}}/{{data.condition.trauma.max}})</span>
         </div>
      </div>
   </div>

   <div class="bottom-conditions">
      <div class="modifiers-group conditions-group">
         <div class="black-title">
            <h3>{{localize "DGNS.Modifiers"}}</h3>
            <a class="icon item-add" data-item="modifier">+</a>
         </div>
         <div class="modifiers-data conditions-data">
            <ol class="modifiers-ol conditions-ol">
            {{#each actor.modifierItems as |mod m|}}
               <li class="conditions-li modifiers-li item" data-item-id="{{mod.id}}" {{#if mod.system.disabled}} style="opacity : 0.5" {{/if}}>
                  <div class="conditions-characteristics">
                        {{#if mod.disabled}}
                          <a class="square border-black button-position checkbox" data-target="item" data-item-target="system.disabled"><div class="square-into"></div></a>
                           {{else}}
                          <a class="square button-position checkbox" data-target="item" data-item-target="system.disabled" ><div class="square-into black"></div></a>
                           {{/if}}
                     <div class='item-data'>
                        <div class="conditions-value">
                           <a class="modifiers-number dropdown">{{mod.ModifyNumber}}</a>
                           <a class="modifiers-type dropdown">{{mod.ModifyType}}</a>
                        </div>
                        {{#if mod.modifyShowName }}
                           <a class="modifiers-action dropdown">{{mod.name}}</a>
                        {{else}}
                           {{#if (eq mod.action "custom")}}
                              <a class="modifiers-action dropdown">{{mod.name}}</a>
                           {{else}}
                              <a class="modifiers-action dropdown">{{mod.ActionType}}</a>
                           {{/if}}
                        {{/if}}
                        {{> systems/degenesis/templates/common/sheet-vertical-bar.html }}
                     </div>
                     <div class="item-controls">
                        <a class="icon item-post"><i class="fas fa-comment"></i></a>
                        <a class="icon item-edit"><i class="fas fa-edit"></i></a>
                        <a class="icon item-delete"><i class="fas fa-times"></i></a>
                     </div>
                  </div>
               </li>
            {{/each}}
         </div>
      </div>

      <div class="complications-group conditions-group">
         <div class="black-title">
            <h3>{{localize "DGNS.Complications"}}</h3>
            <a class="icon item-add" data-item="complication">+</a>
         </div>
         <div class="complications-data conditions-data">
            <ol class="complications-ol conditions-ol">
            {{#each actor.complicationItems as |complication c|}}
               <li class="complications-li conditions-li item" data-item-id="{{complication.id}}">
                  <div class="conditions-characteristics">
                     {{#if (isGM)}}
                     <div class='item-data'>
                        <a class="complications-name conditions-name dropdown">{{complication.name}}</a>
                        <a class="complications-rating conditions-number dropdown">{{complication.cost}}T</a>
                           /
                        <a class="complications-rating conditions-number dropdown">{{complication.rating}}</a>
                        {{> systems/degenesis/templates/common/sheet-vertical-bar.html }}
                     </div>
                     <div class="item-controls">
                        <a class="icon item-post"><i class="fas fa-comment"></i></a>
                        <a class="icon item-edit"><i class="fas fa-edit"></i></a>
                        <a class="icon item-delete"><i class="fas fa-times"></i></a>
                     </div>
                        {{else}}
                        <div class='item-data'>
                           <span class="complications-name conditions-name">{{complication.name}}</span>
                        </div>
                        {{/if}}
                  </div>
               </li>
            {{/each}}
            </ol>
         </div>
      </div>
   </div>
</div>

{{{drawPageSquare 2 6}}}